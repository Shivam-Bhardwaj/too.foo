name: Create Issue

on:
  workflow_dispatch:
    inputs:
      title:
        description: 'Issue title'
        required: true
        type: string
      description:
        description: 'Issue description'
        required: true
        type: string
      labels:
        description: 'Comma-separated labels (e.g., enhancement,bug)'
        required: false
        type: string
        default: 'enhancement'

jobs:
  create-issue:
    runs-on: ubuntu-latest
    permissions:
      issues: write
      contents: read
    steps:
      - name: Create Issue
        uses: actions/github-script@v7
        with:
          script: |
            const title = '${{ github.event.inputs.title }}';
            const body = '${{ github.event.inputs.description }}';
            const labels = '${{ github.event.inputs.labels }}'.split(',').map(l => l.trim()).filter(l => l);
            
            const issue = await github.rest.issues.create({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: title,
              body: body,
              labels: labels
            });
            
            console.log(`âœ… Issue created: #${issue.data.number}`);
            console.log(`ðŸ”— ${issue.data.html_url}`);
            
            // Output issue number for use in other steps
            core.setOutput('issue_number', issue.data.number);
            core.setOutput('issue_url', issue.data.html_url);

